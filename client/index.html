<!doctype html>
<html lang="en">
  <head>
    <!-- âœ… Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap"
      rel="stylesheet"
    />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collaborative Canvas</title>

    <!-- âœ… Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- âœ… Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- âœ… Your CSS -->
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <!-- âœ… Navbar -->
    <nav class="navbar bg-white border-bottom px-3 position-relative">
      <!-- âœ… Online Left -->
      <div class="d-flex align-items-center">
        <button id="onlineBtn" class="btn btn-sm btn-outline-dark onlineBtnTop">
          <i class="bi bi-people"></i>
          <span class="d-none d-md-inline">Online</span>
          <span id="onlineCount" class="badge bg-dark ms-1">0</span>
        </button>
      </div>

      <!-- Center Title -->
      <div class="position-absolute top-50 start-50 translate-middle">
        <div class="appTitle">
          <span class="appTitleText">Collaborative Canvas</span>
        </div>
      </div>

      <!-- Join Right -->
      <div class="ms-auto">
        <div class="joinBox">
          <input
            id="nameInput"
            class="joinInput"
            placeholder="Your name"
            autocomplete="off"
          />
          <button id="joinBtn" class="joinBtn">
            <i class="bi bi-box-arrow-in-right me-1"></i> Join
          </button>
        </div>
      </div>
    </nav>

    <!-- âœ… Top Toolbar -->
    <div id="topToolbar" class="border-bottom bg-white px-3 py-2">
      <div id="toolbarRow">
        <!-- âœ… LEFT side -->
        <div class="toolbarLeft">
          <!-- Online -->
          <!-- <button id="onlineBtn" class="btn btn-sm btn-outline-dark onlineBtn">
            <i class="bi bi-people"></i>
            <span class="d-none d-md-inline">Online</span>
            <span id="onlineCount" class="badge bg-dark ms-1">0</span>
          </button> -->

          <!-- Tools -->
          <div class="btn-group toolGroup" role="group" aria-label="Tools">
            <button
              id="brushBtn"
              class="btn btn-outline-dark btn-sm activeTool toolBtnWide"
              title="Brush"
            >
              <i class="bi bi-brush"></i>
              <span class="d-none d-lg-inline">Brush</span>
            </button>
            <button
              id="eraserBtn"
              class="btn btn-outline-dark btn-sm toolBtnWide"
              title="Eraser"
            >
              <i class="bi bi-eraser"></i>
              <span class="d-none d-lg-inline">Eraser</span>
            </button>
          </div>

          <!-- Width -->
          <div class="toolbarWidth">
            <span class="toolbarLabel">Width</span>
            <input
              type="range"
              id="widthSlider"
              class="form-range widthRange"
              min="1"
              max="40"
              value="6"
            />
            <span id="widthValue" class="badge bg-dark">6</span>
          </div>
        </div>

        <!-- âœ… CENTER -->
        <div class="toolbarCenter">
          <span class="toolbarLabel">Colors</span>

          <!-- âœ… No scroll palette -->
          <div id="colorPalette" class="paletteRow"></div>

          <!-- Selected preview -->
          <div
            id="selectedColorPreview"
            class="selectedPreview"
            title="Selected color"
          ></div>

          <!-- Custom Picker (bigger than swatches) -->
          <input
            type="color"
            id="colorPicker"
            class="form-control form-control-color colorPickerBig"
            value="#111111"
            title="Custom color"
          />
        </div>

        <!-- âœ… RIGHT -->
        <div class="toolbarRight">
          <button
            id="undoBtn"
            class="btn btn-warning btn-sm actionBtn"
            title="Undo (Ctrl+Z)"
          >
            <i class="bi bi-arrow-counterclockwise"></i>
            <span>Undo</span>
          </button>

          <button
            id="redoBtn"
            class="btn btn-success btn-sm actionBtn"
            title="Redo (Ctrl+Y)"
          >
            <i class="bi bi-arrow-clockwise"></i>
            <span>Redo</span>
          </button>
        </div>
      </div>
    </div>

    <!-- âœ… Canvas -->
    <canvas id="board"></canvas>

    <!-- âœ… Status Bar -->
    <div id="statusBar" class="shadow-sm">
      <div id="statusLeft">ðŸ”´ Disconnected</div>
      <div id="statusCenter">Tool: Brush | Width: 6 | Color: #111111</div>
      <div id="statusRight">Users: 0</div>
    </div>

    <!-- Cursor preview -->
    <div id="brushCursor"></div>

    <!-- FPS -->
    <div id="statusFPS">FPS: --</div>

    <!-- âœ… Socket.io client -->
    <script src="/socket.io/socket.io.js"></script>

    <!-- âœ… Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- âœ… Main JS -->
    <script type="module" src="./main.js"></script>

    <!-- âœ… Toast Container -->
    <div class="toast-container position-fixed p-3" id="toastContainer">
      <div
        id="appToast"
        class="toast align-items-center text-bg-dark border-0"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body" id="toastBody">Hello!</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>
  </body>
</html>
